/* ===== BASE STYLES ===== */
body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    font-family: 'Arial', sans-serif;
    color: white;
    text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
    height: 100vh;
    width: 100vw;
    background: transparent;
}

/* ===== RGB BACKGROUND ===== */
#rgbBackground {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: -1;
}

/* ===== MAIN APP CONTAINER ===== */
#shell {
    background-color: rgba(25, 25, 25, 0.65);
    backdrop-filter: blur(12px) saturate(180%);
    -webkit-backdrop-filter: blur(12px) saturate(180%);
    border-radius: 10px;
    margin: 0;
    padding: 20px;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    border: 1px solid rgba(255, 255, 255, 0.08);
}

/* ===== DISPLAY TABLE ===== */
#display {
    width: 100%;
    height: 100%;
    border-collapse: collapse;
    table-layout: fixed;
    flex: 1;
}

#display tbody {
    display: flex;
    flex-direction: column;
    height: 100%;
}

#display tr {
    display: flex;
    flex: 1;
    min-height: 0;
}

#display td {
    padding: 15px;
    border: 1px solid rgba(255, 255, 255, 0.12);
    display: flex;
    flex-direction: column;
    background-color: rgba(35, 35, 35, 0.5);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    transition: all 0.3s ease;
}

/* ===== CURRENT WEATHER SECTION ===== */
#current-weather-time {
    /* Existing styles */
    padding: 20px; /* Increased padding */
}

.current-weather .icon img {
    width: 100px;  /* Increased from ~60px */
    height: 100px;
    margin: 10px auto;
    filter: drop-shadow(0 0 5px rgba(0,0,0,0.5));
}

.current-weather .desc {
    font-size: 1.8rem;  /* ~28-30px */
    margin: 15px 0;
    font-weight: 500;
    color: rgba(255,255,255,0.95);
}

.currentTemp {
    font-size: 1.5rem;  /* ~24px */
    margin: 15px 0 5px;
}

.currentTemp .temp {
    font-size: 2.5rem;  /* ~40px */
    font-weight: bold;
    display: inline-block;
    margin-top: 5px;
}

/* Time/Date Adjustments to Match */
.time-date #time {
    font-size: 3rem;  /* ~48px */
    margin-bottom: 10px;
}

.time-date #date {
    font-size: 1.5rem;  /* ~24px */
}
/* ===== TIME/DATE SECTION ===== */
#time {
    font-size: 3.5vw;
    font-weight: bold;
    margin-bottom: 1vh;
    color: rgba(255, 255, 255, 0.95);
}

#date {
    font-size: 1.8vw;
    margin-bottom: 3vh;
    color: rgba(255, 255, 255, 0.85);
}

/* ===== FORECAST SECTIONS ===== */
.forecast {
    background-color: rgba(40, 40, 40, 0.45);
    flex: 1;
    min-width: 0;
    text-align: center;
    justify-content: space-between;
}

/* ===== FINANCIAL DATA ===== */
#btcprice, #stockData {
    font-size: 1.8vw;
    margin: 1vh 0;
    padding: 8px;
    background-color: rgba(20, 20, 20, 0.3);
    border-radius: 5px;
    color: rgba(255, 255, 255, 0.92);
    backdrop-filter: blur(4px);
}

/* ===== WEATHER ALERTS ===== */
#weatherAlerts {
    flex: 1;
    overflow-y: auto;
    padding: 8px;
    background-color: rgba(20, 20, 20, 0.25);
    border-radius: 5px;
    margin-top: 10px;
    font-size: 1.1vw;
    backdrop-filter: blur(4px);
}

/* ===== GLASS EFFECT ENHANCEMENTS ===== */
.icon img {
    max-width: 100%;
    max-height: 10vh;
    margin: 0 auto;
    filter: drop-shadow(0 0 4px rgba(0, 0, 0, 0.5));
}

/* ===== SMOOTH TRANSITIONS ===== */
#display td:hover {
    background-color: rgba(45, 45, 45, 0.6);
}

/* ===== RADAR STYLES ===== */
#radar-container {
    position: absolute;
    top: -35px;
    right: 20px;
    width: 420px;
    height: 270px;
    background-color: rgba(25, 25, 25, 0.7);
    border-radius: 8px;
    overflow: hidden;
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.3s ease;
    transform: scale(0.8);
    transform-origin: bottom right;
    opacity: 0.7;
    z-index: 10;
}

#radar-container.active {
    width: 600px;
    height: 400px;
    opacity: 1;
    transform: scale(1);
}

#radar-map {
    width: 100%;
    height: calc(100% - 30px);
}

#radar-controls {
    height: 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 10px;
    background-color: rgba(0, 0, 0, 0.3);
    font-size: 0.8rem;
}

#radar-toggle {
    background: rgba(255, 255, 255, 0.1);
    border: none;
    color: white;
    padding: 2px 8px;
    border-radius: 4px;
    cursor: pointer;
}

#radar-toggle:hover {
    background: rgba(255, 255, 255, 0.2);
}
.control-group select {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: white;
    padding: 5px;
    border-radius: 4px;
    margin-right: 10px;
}

.control-group select:focus {
    outline: none;
    border-color: rgba(255, 255, 255, 0.4);
}

#animal-companion {
    position: fixed;
    right: 20px;
    bottom: 20px;
    z-index: 100;
    cursor: pointer;
    transition: all 0.3s ease;
}

.animal-body {
    width: 80px;
    height: 60px;
    background-color: #ff6b35; /* Fox orange */
    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    position: relative;
    animation: float 3s ease-in-out infinite;
}

.animal-face {
    position: absolute;
    width: 40px;
    height: 30px;
    background-color: #f7c59f; /* Light face color */
    border-radius: 50%;
    top: 15px;
    left: 20px;
}

.animal-face::before, .animal-face::after {
    content: '';
    position: absolute;
    background-color: #333;
    border-radius: 50%;
    width: 6px;
    height: 6px;
    top: 10px;
}

.animal-face::before { left: 8px; }
.animal-face::after { right: 8px; }

.animal-message {
    position: absolute;
    bottom: 100%;
    right: 0;
    background: white;
    padding: 8px 12px;
    border-radius: 12px;
    margin-bottom: 10px;
    opacity: 0;
    transition: opacity 0.3s ease;
    width: 150px;
    text-align: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

#animal-companion:hover .animal-message {
    opacity: 1;
}

/* Animation */
@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

@keyframes blink {
    0%, 100% { height: 6px; }
    50% { height: 2px; }
}

.animal-face::before, .animal-face::after {
    animation: blink 3s infinite;
}

/* Container to constrain the roaming area */
#animal-container {
    position: fixed;
    bottom: 20px;
    left: 0;
    width: 100%;
    height: 80px;
    overflow: hidden;
    pointer-events: none;
    z-index: 100;
}

/* Animal companion with roaming animation */
#animal-companion {
    position: absolute;
    bottom: 0;
    left: 0;
    cursor: pointer;
    animation: roam 15s linear infinite alternate;
    transform-origin: center;
}

/* Roaming animation - moves left to right and back */
@keyframes roam {
    0% {
        transform: translateX(0) translateY(0);
    }
    25% {
        transform: translateX(25vw) translateY(-10px);
    }
    50% {
        transform: translateX(50vw) translateY(0);
    }
    75% {
        transform: translateX(75vw) translateY(-10px);
    }
    100% {
        transform: translateX(calc(100vw - 100px)) translateY(0);
    }
}

/* Walking animation - bounces and rotates slightly */
.animal-body {
    width: 80px;
    height: 60px;
    background-color: #ff6b35;
    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    position: relative;
    animation: 
        walk 0.5s ease-in-out infinite,
        float 3s ease-in-out infinite;
}

/* Face remains the same */
.animal-face {
    position: absolute;
    width: 40px;
    height: 30px;
    background-color: #f7c59f;
    border-radius: 50%;
    top: 15px;
    left: 20px;
}

.animal-face::before, .animal-face::after {
    content: '';
    position: absolute;
    background-color: #333;
    border-radius: 50%;
    width: 6px;
    height: 6px;
    top: 10px;
    animation: blink 3s infinite;
}

.animal-face::before { left: 8px; }
.animal-face::after { right: 8px; }

/* Speech bubble */
.animal-message {
    position: absolute;
    bottom: 100%;
    right: 0;
    background: white;
    padding: 8px 12px;
    border-radius: 12px;
    margin-bottom: 10px;
    opacity: 0;
    transition: opacity 0.3s ease;
    width: 150px;
    text-align: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    pointer-events: none;
}

/* Show message on hover */
#animal-companion:hover .animal-message {
    opacity: 1;
}

/* Animations */
@keyframes walk {
    0%, 100% { transform: rotate(0deg) translateY(0); }
    25% { transform: rotate(-5deg) translateY(-2px); }
    75% { transform: rotate(5deg) translateY(-2px); }
}

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}

@keyframes blink {
    0%, 100% { height: 6px; }
    50% { height: 2px; }
}

/* Add legs for walking effect */
.animal-legs {
    position: absolute;
    bottom: -5px;
    width: 100%;
    height: 10px;
}

.animal-leg {
    position: absolute;
    width: 8px;
    height: 15px;
    background-color: #e05a2b;
    border-radius: 5px;
    animation: legMove 0.5s infinite;
}

.animal-leg:nth-child(1) { left: 15px; }
.animal-leg:nth-child(2) { left: 25px; animation-delay: 0.25s; }
.animal-leg:nth-child(3) { right: 25px; }
.animal-leg:nth-child(4) { right: 15px; animation-delay: 0.25s; }

@keyframes legMove {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-5px) rotate(10deg); }
}

/* Enhanced Fox Styling */
#animal-container {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 120px;
  overflow: hidden;
  pointer-events: none;
  z-index: 100;
}

#animal-companion {
  position: absolute;
  bottom: 20px;
  left: 0;
  cursor: pointer;
  animation: roam 20s linear infinite alternate;
  transform-origin: center;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
}

/* Foxy Details */
.animal-body {
  width: 100px;
  height: 70px;
  background-color: #ff6b35;
  border-radius: 50% 50% 40% 40% / 60% 60% 30% 30%;
  position: relative;
  animation: 
    walk 0.8s ease-in-out infinite,
    float 4s ease-in-out infinite;
}

/* Fluffy Tail */
.animal-tail {
  position: absolute;
  width: 40px;
  height: 25px;
  background-color: #e05a2b;
  border-radius: 50%;
  right: -20px;
  top: 15px;
  transform-origin: left center;
  animation: wag 3s ease-in-out infinite;
}

/* Pointy Ears */
.animal-ear {
  position: absolute;
  width: 20px;
  height: 25px;
  background-color: #ff6b35;
  clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
  top: -10px;
}
.left-ear { left: 15px; transform: rotate(-15deg); }
.right-ear { right: 15px; transform: rotate(15deg); }

/* Cute Nose */
.animal-nose {
  position: absolute;
  width: 8px;
  height: 6px;
  background-color: #333;
  border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
  bottom: 8px;
  left: 50%;
  transform: translateX(-50%);
}

/* Enhanced Animations */
@keyframes roam {
  0% { 
    transform: translateX(0) scaleX(1);
  }
  49% { 
    transform: translateX(calc(100vw - 120px)) scaleX(1);
  }
  50% { 
    transform: translateX(calc(100vw - 120px)) scaleX(-1);
  }
  99% { 
    transform: translateX(0) scaleX(-1);
  }
  100% { 
    transform: translateX(0) scaleX(1);
  }
}

@keyframes walk {
  0%, 100% { transform: rotate(0deg) translateY(0); }
  25% { transform: rotate(-3deg) translateY(-3px); }
  75% { transform: rotate(3deg) translateY(-3px); }
}

@keyframes wag {
  0%, 100% { transform: rotate(-10deg); }
  50% { transform: rotate(10deg); }
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}

/* Love Hearts */
.animal-hearts {
  position: absolute;
  top: -30px;
  left: 50%;
  transform: translateX(-50%);
  opacity: 0;
  transition: all 0.3s ease;
  animation: float-hearts 2s ease-in-out infinite;
}

#animal-companion:hover .animal-hearts {
  opacity: 1;
}

@keyframes float-hearts {
  0%, 100% { transform: translateX(-50%) translateY(0); }
  50% { transform: translateX(-50%) translateY(-10px); }
}

/* Responsive Adjustments */
@media (max-width: 768px) {
  #animal-container {
    height: 100px;
  }
  .animal-body {
    width: 80px;
    height: 60px;
  }
}


/* ===== MEDIA QUERIES ===== */
@media (max-width: 768px) {
    #shell {
        padding: 15px;
    }
    
    #time { 
        font-size: 6vw; 
    }
    #date { 
        font-size: 3.5vw; 
    }
    #btcprice, #stockData { 
        font-size: 3.5vw; 
    }
    .currentTemp { 
        font-size: 4vw; 
    }
    .temp { 
        font-size: 5vw; 
    }
    .day { 
        font-size: 3vw; 
    }
    #weatherAlerts { 
        font-size: 2.5vw; 
    }
    .desc { 
        font-size: 2.8vw; 
    }
function updateStockData(data) {
    const stockInfo = data['Global Quote'];
    if (!stockInfo || !stockInfo['05. price']) {
        // If Alpha Vantage fails but we have data from Yahoo, don't overwrite
        if (!elements.stockData.text().includes('Yahoo Finance')) {
            elements.stockData.html(`
                <div class="stock-error">
                    ${currentStockSymbol}: Data unavailable
                    <small>Next try in 30s</small>
                </div>
            `);
        }
        return;
    }
    
    const stockPrice = parseFloat(stockInfo['05. price']).toFixed(2);
    const priceChange = parseFloat(stockInfo['10. change percent']).toFixed(2);
    const changeColor = priceChange >= 0 ? '#4CAF50' : '#F44336';
    
    elements.stockData.html(`
        <div>
            ${currentStockSymbol}: $${stockPrice} 
            <span style="color: ${changeColor}">(${priceChange}%)</span>
            <small>(Alpha Vantage)</small>
        </div>
    `);
}